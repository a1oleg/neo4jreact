{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.queryType = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _integer = require(\"./integer\");\n/**\r\n * Copyright (c) 2002-2020 \"Neo4j,\"\r\n * Neo4j Sweden AB [http://neo4j.com]\r\n *\r\n * This file is part of Neo4j.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * A ResultSummary instance contains structured metadata for a {@link Result}.\r\n * @access public\r\n */\n\n\nvar ResultSummary = /*#__PURE__*/function () {\n  /**\r\n   * @constructor\r\n   * @param {string} query - The query this summary is for\r\n   * @param {Object} parameters - Parameters for the query\r\n   * @param {Object} metadata - Query metadata\r\n   */\n  function ResultSummary(query, parameters, metadata) {\n    (0, _classCallCheck2[\"default\"])(this, ResultSummary);\n    /**\r\n     * The query and parameters this summary is for.\r\n     * @type {{text: string, parameters: Object}}\r\n     * @public\r\n     */\n\n    this.query = {\n      text: query,\n      parameters: parameters\n      /**\r\n       * The type of query executed. Can be \"r\" for read-only query, \"rw\" for read-write query,\r\n       * \"w\" for write-only query and \"s\" for schema-write query.\r\n       * String constants are available in {@link queryType} object.\r\n       * @type {string}\r\n       * @public\r\n       */\n\n    };\n    this.queryType = metadata.type;\n    /**\r\n     * Counters for operations the query triggered.\r\n     * @type {QueryStatistics}\r\n     * @public\r\n     */\n\n    this.counters = new QueryStatistics(metadata.stats || {}); // for backwards compatibility, remove in future version\n\n    /**\r\n     * Use {@link ResultSummary.counters} instead.\r\n     * @type {QueryStatistics}\r\n     * @deprecated\r\n     */\n\n    this.updateStatistics = this.counters;\n    /**\r\n     * This describes how the database will execute the query.\r\n     * Query plan for the executed query if available, otherwise undefined.\r\n     * Will only be populated for queries that start with \"EXPLAIN\".\r\n     * @type {Plan}\r\n     * @public\r\n     */\n\n    this.plan = metadata.plan || metadata.profile ? new Plan(metadata.plan || metadata.profile) : false;\n    /**\r\n     * This describes how the database did execute your query. This will contain detailed information about what\r\n     * each step of the plan did. Profiled query plan for the executed query if available, otherwise undefined.\r\n     * Will only be populated for queries that start with \"PROFILE\".\r\n     * @type {ProfiledPlan}\r\n     * @public\r\n     */\n\n    this.profile = metadata.profile ? new ProfiledPlan(metadata.profile) : false;\n    /**\r\n     * An array of notifications that might arise when executing the query. Notifications can be warnings about\r\n     * problematic queries or other valuable information that can be presented in a client. Unlike failures\r\n     * or errors, notifications do not affect the execution of a query.\r\n     * @type {Array<Notification>}\r\n     * @public\r\n     */\n\n    this.notifications = this._buildNotifications(metadata.notifications);\n    /**\r\n     * The basic information of the server where the result is obtained from.\r\n     * @type {ServerInfo}\r\n     * @public\r\n     */\n\n    this.server = new ServerInfo(metadata.server);\n    /**\r\n     * The time it took the server to consume the result.\r\n     * @type {number}\r\n     * @public\r\n     */\n\n    this.resultConsumedAfter = metadata.result_consumed_after;\n    /**\r\n     * The time it took the server to make the result available for consumption in milliseconds.\r\n     * @type {number}\r\n     * @public\r\n     */\n\n    this.resultAvailableAfter = metadata.result_available_after;\n    /**\r\n     * The database name where this summary is obtained from.\r\n     * @type {{name: string}}\r\n     * @public\r\n     */\n\n    this.database = {\n      name: metadata.db || null\n    };\n  }\n\n  (0, _createClass2[\"default\"])(ResultSummary, [{\n    key: \"_buildNotifications\",\n    value: function _buildNotifications(notifications) {\n      if (!notifications) {\n        return [];\n      }\n\n      return notifications.map(function (n) {\n        return new Notification(n);\n      });\n    }\n    /**\r\n     * Check if the result summary has a plan\r\n     * @return {boolean}\r\n     */\n\n  }, {\n    key: \"hasPlan\",\n    value: function hasPlan() {\n      return this.plan instanceof Plan;\n    }\n    /**\r\n     * Check if the result summary has a profile\r\n     * @return {boolean}\r\n     */\n\n  }, {\n    key: \"hasProfile\",\n    value: function hasProfile() {\n      return this.profile instanceof ProfiledPlan;\n    }\n  }]);\n  return ResultSummary;\n}();\n/**\r\n * Class for execution plan received by prepending Cypher with EXPLAIN.\r\n * @access public\r\n */\n\n\nvar Plan =\n/**\r\n * Create a Plan instance\r\n * @constructor\r\n * @param {Object} plan - Object with plan data\r\n */\nfunction Plan(plan) {\n  (0, _classCallCheck2[\"default\"])(this, Plan);\n  this.operatorType = plan.operatorType;\n  this.identifiers = plan.identifiers;\n  this.arguments = plan.args;\n  this.children = plan.children ? plan.children.map(function (child) {\n    return new Plan(child);\n  }) : [];\n};\n/**\r\n * Class for execution plan received by prepending Cypher with PROFILE.\r\n * @access public\r\n */\n\n\nvar ProfiledPlan = /*#__PURE__*/function () {\n  /**\r\n   * Create a ProfiledPlan instance\r\n   * @constructor\r\n   * @param {Object} profile - Object with profile data\r\n   */\n  function ProfiledPlan(profile) {\n    (0, _classCallCheck2[\"default\"])(this, ProfiledPlan);\n    this.operatorType = profile.operatorType;\n    this.identifiers = profile.identifiers;\n    this.arguments = profile.args;\n    this.dbHits = valueOrDefault('dbHits', profile);\n    this.rows = valueOrDefault('rows', profile);\n    this.pageCacheMisses = valueOrDefault('pageCacheMisses', profile);\n    this.pageCacheHits = valueOrDefault('pageCacheHits', profile);\n    this.pageCacheHitRatio = valueOrDefault('pageCacheHitRatio', profile);\n    this.time = valueOrDefault('time', profile);\n    this.children = profile.children ? profile.children.map(function (child) {\n      return new ProfiledPlan(child);\n    }) : [];\n  }\n\n  (0, _createClass2[\"default\"])(ProfiledPlan, [{\n    key: \"hasPageCacheStats\",\n    value: function hasPageCacheStats() {\n      return this.pageCacheMisses > 0 || this.pageCacheHits > 0 || this.pageCacheHitRatio > 0;\n    }\n  }]);\n  return ProfiledPlan;\n}();\n/**\r\n * Get statistical information for a {@link Result}.\r\n * @access public\r\n */\n\n\nvar QueryStatistics = /*#__PURE__*/function () {\n  /**\r\n   * Structurize the statistics\r\n   * @constructor\r\n   * @param {Object} statistics - Result statistics\r\n   */\n  function QueryStatistics(statistics) {\n    var _this = this;\n\n    (0, _classCallCheck2[\"default\"])(this, QueryStatistics);\n    this._stats = {\n      nodesCreated: 0,\n      nodesDeleted: 0,\n      relationshipsCreated: 0,\n      relationshipsDeleted: 0,\n      propertiesSet: 0,\n      labelsAdded: 0,\n      labelsRemoved: 0,\n      indexesAdded: 0,\n      indexesRemoved: 0,\n      constraintsAdded: 0,\n      constraintsRemoved: 0\n    };\n    this._systemUpdates = 0;\n    Object.keys(statistics).forEach(function (index) {\n      // To camelCase\n      var camelCaseIndex = index.replace(/(-\\w)/g, function (m) {\n        return m[1].toUpperCase();\n      });\n\n      if (camelCaseIndex in _this._stats) {\n        _this._stats[camelCaseIndex] = intValue(statistics[index]);\n      } else if (camelCaseIndex === 'systemUpdates') {\n        _this._systemUpdates = intValue(statistics[index]);\n      }\n    });\n    this._stats = Object.freeze(this._stats);\n  }\n  /**\r\n   * Did the database get updated?\r\n   * @return {boolean}\r\n   */\n\n\n  (0, _createClass2[\"default\"])(QueryStatistics, [{\n    key: \"containsUpdates\",\n    value: function containsUpdates() {\n      var _this2 = this;\n\n      return Object.keys(this._stats).reduce(function (last, current) {\n        return last + _this2._stats[current];\n      }, 0) > 0;\n    }\n    /**\r\n     * Returns the query statistics updates in a dictionary.\r\n     * @returns {*}\r\n     */\n\n  }, {\n    key: \"updates\",\n    value: function updates() {\n      return this._stats;\n    }\n    /**\r\n     * Return true if the system database get updated, otherwise false\r\n     * @returns {boolean} - If the system database get updated or not.\r\n     */\n\n  }, {\n    key: \"containsSystemUpdates\",\n    value: function containsSystemUpdates() {\n      return this._systemUpdates > 0;\n    }\n    /**\r\n     * @returns {number} - Number of system updates\r\n     */\n\n  }, {\n    key: \"systemUpdates\",\n    value: function systemUpdates() {\n      return this._systemUpdates;\n    }\n  }]);\n  return QueryStatistics;\n}();\n/**\r\n * Class for Cypher notifications\r\n * @access public\r\n */\n\n\nvar Notification = /*#__PURE__*/function () {\n  /**\r\n   * Create a Notification instance\r\n   * @constructor\r\n   * @param {Object} notification - Object with notification data\r\n   */\n  function Notification(notification) {\n    (0, _classCallCheck2[\"default\"])(this, Notification);\n    this.code = notification.code;\n    this.title = notification.title;\n    this.description = notification.description;\n    this.severity = notification.severity;\n    this.position = Notification._constructPosition(notification.position);\n  }\n\n  (0, _createClass2[\"default\"])(Notification, null, [{\n    key: \"_constructPosition\",\n    value: function _constructPosition(pos) {\n      if (!pos) {\n        return {};\n      }\n\n      return {\n        offset: intValue(pos.offset),\n        line: intValue(pos.line),\n        column: intValue(pos.column)\n      };\n    }\n  }]);\n  return Notification;\n}();\n/**\r\n * Class for exposing server info from a result.\r\n * @access public\r\n */\n\n\nvar ServerInfo =\n/**\r\n * Create a ServerInfo instance\r\n * @constructor\r\n * @param {Object} serverMeta - Object with serverMeta data\r\n */\nfunction ServerInfo(serverMeta) {\n  (0, _classCallCheck2[\"default\"])(this, ServerInfo);\n\n  if (serverMeta) {\n    this.address = serverMeta.address;\n    this.version = serverMeta.version;\n  }\n};\n\nfunction intValue(value) {\n  return (0, _integer.isInt)(value) ? value.toInt() : value;\n}\n\nfunction valueOrDefault(key, values) {\n  var defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  if (key in values) {\n    var value = values[key];\n    return (0, _integer.isInt)(value) ? value.toInt() : value;\n  } else {\n    return defaultValue;\n  }\n}\n/**\r\n * The constants for query types\r\n * @type {{SCHEMA_WRITE: string, WRITE_ONLY: string, READ_ONLY: string, READ_WRITE: string}}\r\n */\n\n\nvar queryType = {\n  READ_ONLY: 'r',\n  READ_WRITE: 'rw',\n  WRITE_ONLY: 'w',\n  SCHEMA_WRITE: 's'\n};\nexports.queryType = queryType;\nvar _default = ResultSummary;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["C:/Users/a1ole/Documents/GitHub/neo4jreact/node_modules/neo4j-driver/lib/result-summary.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","queryType","_classCallCheck2","_createClass2","_integer","ResultSummary","query","parameters","metadata","text","type","counters","QueryStatistics","stats","updateStatistics","plan","profile","Plan","ProfiledPlan","notifications","_buildNotifications","server","ServerInfo","resultConsumedAfter","result_consumed_after","resultAvailableAfter","result_available_after","database","name","db","key","map","n","Notification","hasPlan","hasProfile","operatorType","identifiers","arguments","args","children","child","dbHits","valueOrDefault","rows","pageCacheMisses","pageCacheHits","pageCacheHitRatio","time","hasPageCacheStats","statistics","_this","_stats","nodesCreated","nodesDeleted","relationshipsCreated","relationshipsDeleted","propertiesSet","labelsAdded","labelsRemoved","indexesAdded","indexesRemoved","constraintsAdded","constraintsRemoved","_systemUpdates","keys","forEach","index","camelCaseIndex","replace","m","toUpperCase","intValue","freeze","containsUpdates","_this2","reduce","last","current","updates","containsSystemUpdates","systemUpdates","notification","code","title","description","severity","position","_constructPosition","pos","offset","line","column","serverMeta","address","version","isInt","toInt","values","defaultValue","length","undefined","READ_ONLY","READ_WRITE","WRITE_ONLY","SCHEMA_WRITE","_default"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports[\"default\"] = exports.queryType = void 0;\r\n\r\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\r\n\r\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\r\n\r\nvar _integer = require(\"./integer\");\r\n\r\n/**\r\n * Copyright (c) 2002-2020 \"Neo4j,\"\r\n * Neo4j Sweden AB [http://neo4j.com]\r\n *\r\n * This file is part of Neo4j.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n/**\r\n * A ResultSummary instance contains structured metadata for a {@link Result}.\r\n * @access public\r\n */\r\nvar ResultSummary =\r\n/*#__PURE__*/\r\nfunction () {\r\n  /**\r\n   * @constructor\r\n   * @param {string} query - The query this summary is for\r\n   * @param {Object} parameters - Parameters for the query\r\n   * @param {Object} metadata - Query metadata\r\n   */\r\n  function ResultSummary(query, parameters, metadata) {\r\n    (0, _classCallCheck2[\"default\"])(this, ResultSummary);\r\n\r\n    /**\r\n     * The query and parameters this summary is for.\r\n     * @type {{text: string, parameters: Object}}\r\n     * @public\r\n     */\r\n    this.query = {\r\n      text: query,\r\n      parameters: parameters\r\n      /**\r\n       * The type of query executed. Can be \"r\" for read-only query, \"rw\" for read-write query,\r\n       * \"w\" for write-only query and \"s\" for schema-write query.\r\n       * String constants are available in {@link queryType} object.\r\n       * @type {string}\r\n       * @public\r\n       */\r\n\r\n    };\r\n    this.queryType = metadata.type;\r\n    /**\r\n     * Counters for operations the query triggered.\r\n     * @type {QueryStatistics}\r\n     * @public\r\n     */\r\n\r\n    this.counters = new QueryStatistics(metadata.stats || {}); // for backwards compatibility, remove in future version\r\n\r\n    /**\r\n     * Use {@link ResultSummary.counters} instead.\r\n     * @type {QueryStatistics}\r\n     * @deprecated\r\n     */\r\n\r\n    this.updateStatistics = this.counters;\r\n    /**\r\n     * This describes how the database will execute the query.\r\n     * Query plan for the executed query if available, otherwise undefined.\r\n     * Will only be populated for queries that start with \"EXPLAIN\".\r\n     * @type {Plan}\r\n     * @public\r\n     */\r\n\r\n    this.plan = metadata.plan || metadata.profile ? new Plan(metadata.plan || metadata.profile) : false;\r\n    /**\r\n     * This describes how the database did execute your query. This will contain detailed information about what\r\n     * each step of the plan did. Profiled query plan for the executed query if available, otherwise undefined.\r\n     * Will only be populated for queries that start with \"PROFILE\".\r\n     * @type {ProfiledPlan}\r\n     * @public\r\n     */\r\n\r\n    this.profile = metadata.profile ? new ProfiledPlan(metadata.profile) : false;\r\n    /**\r\n     * An array of notifications that might arise when executing the query. Notifications can be warnings about\r\n     * problematic queries or other valuable information that can be presented in a client. Unlike failures\r\n     * or errors, notifications do not affect the execution of a query.\r\n     * @type {Array<Notification>}\r\n     * @public\r\n     */\r\n\r\n    this.notifications = this._buildNotifications(metadata.notifications);\r\n    /**\r\n     * The basic information of the server where the result is obtained from.\r\n     * @type {ServerInfo}\r\n     * @public\r\n     */\r\n\r\n    this.server = new ServerInfo(metadata.server);\r\n    /**\r\n     * The time it took the server to consume the result.\r\n     * @type {number}\r\n     * @public\r\n     */\r\n\r\n    this.resultConsumedAfter = metadata.result_consumed_after;\r\n    /**\r\n     * The time it took the server to make the result available for consumption in milliseconds.\r\n     * @type {number}\r\n     * @public\r\n     */\r\n\r\n    this.resultAvailableAfter = metadata.result_available_after;\r\n    /**\r\n     * The database name where this summary is obtained from.\r\n     * @type {{name: string}}\r\n     * @public\r\n     */\r\n\r\n    this.database = {\r\n      name: metadata.db || null\r\n    };\r\n  }\r\n\r\n  (0, _createClass2[\"default\"])(ResultSummary, [{\r\n    key: \"_buildNotifications\",\r\n    value: function _buildNotifications(notifications) {\r\n      if (!notifications) {\r\n        return [];\r\n      }\r\n\r\n      return notifications.map(function (n) {\r\n        return new Notification(n);\r\n      });\r\n    }\r\n    /**\r\n     * Check if the result summary has a plan\r\n     * @return {boolean}\r\n     */\r\n\r\n  }, {\r\n    key: \"hasPlan\",\r\n    value: function hasPlan() {\r\n      return this.plan instanceof Plan;\r\n    }\r\n    /**\r\n     * Check if the result summary has a profile\r\n     * @return {boolean}\r\n     */\r\n\r\n  }, {\r\n    key: \"hasProfile\",\r\n    value: function hasProfile() {\r\n      return this.profile instanceof ProfiledPlan;\r\n    }\r\n  }]);\r\n  return ResultSummary;\r\n}();\r\n/**\r\n * Class for execution plan received by prepending Cypher with EXPLAIN.\r\n * @access public\r\n */\r\n\r\n\r\nvar Plan =\r\n/**\r\n * Create a Plan instance\r\n * @constructor\r\n * @param {Object} plan - Object with plan data\r\n */\r\nfunction Plan(plan) {\r\n  (0, _classCallCheck2[\"default\"])(this, Plan);\r\n  this.operatorType = plan.operatorType;\r\n  this.identifiers = plan.identifiers;\r\n  this.arguments = plan.args;\r\n  this.children = plan.children ? plan.children.map(function (child) {\r\n    return new Plan(child);\r\n  }) : [];\r\n};\r\n/**\r\n * Class for execution plan received by prepending Cypher with PROFILE.\r\n * @access public\r\n */\r\n\r\n\r\nvar ProfiledPlan =\r\n/*#__PURE__*/\r\nfunction () {\r\n  /**\r\n   * Create a ProfiledPlan instance\r\n   * @constructor\r\n   * @param {Object} profile - Object with profile data\r\n   */\r\n  function ProfiledPlan(profile) {\r\n    (0, _classCallCheck2[\"default\"])(this, ProfiledPlan);\r\n    this.operatorType = profile.operatorType;\r\n    this.identifiers = profile.identifiers;\r\n    this.arguments = profile.args;\r\n    this.dbHits = valueOrDefault('dbHits', profile);\r\n    this.rows = valueOrDefault('rows', profile);\r\n    this.pageCacheMisses = valueOrDefault('pageCacheMisses', profile);\r\n    this.pageCacheHits = valueOrDefault('pageCacheHits', profile);\r\n    this.pageCacheHitRatio = valueOrDefault('pageCacheHitRatio', profile);\r\n    this.time = valueOrDefault('time', profile);\r\n    this.children = profile.children ? profile.children.map(function (child) {\r\n      return new ProfiledPlan(child);\r\n    }) : [];\r\n  }\r\n\r\n  (0, _createClass2[\"default\"])(ProfiledPlan, [{\r\n    key: \"hasPageCacheStats\",\r\n    value: function hasPageCacheStats() {\r\n      return this.pageCacheMisses > 0 || this.pageCacheHits > 0 || this.pageCacheHitRatio > 0;\r\n    }\r\n  }]);\r\n  return ProfiledPlan;\r\n}();\r\n/**\r\n * Get statistical information for a {@link Result}.\r\n * @access public\r\n */\r\n\r\n\r\nvar QueryStatistics =\r\n/*#__PURE__*/\r\nfunction () {\r\n  /**\r\n   * Structurize the statistics\r\n   * @constructor\r\n   * @param {Object} statistics - Result statistics\r\n   */\r\n  function QueryStatistics(statistics) {\r\n    var _this = this;\r\n\r\n    (0, _classCallCheck2[\"default\"])(this, QueryStatistics);\r\n    this._stats = {\r\n      nodesCreated: 0,\r\n      nodesDeleted: 0,\r\n      relationshipsCreated: 0,\r\n      relationshipsDeleted: 0,\r\n      propertiesSet: 0,\r\n      labelsAdded: 0,\r\n      labelsRemoved: 0,\r\n      indexesAdded: 0,\r\n      indexesRemoved: 0,\r\n      constraintsAdded: 0,\r\n      constraintsRemoved: 0\r\n    };\r\n    this._systemUpdates = 0;\r\n    Object.keys(statistics).forEach(function (index) {\r\n      // To camelCase\r\n      var camelCaseIndex = index.replace(/(-\\w)/g, function (m) {\r\n        return m[1].toUpperCase();\r\n      });\r\n\r\n      if (camelCaseIndex in _this._stats) {\r\n        _this._stats[camelCaseIndex] = intValue(statistics[index]);\r\n      } else if (camelCaseIndex === 'systemUpdates') {\r\n        _this._systemUpdates = intValue(statistics[index]);\r\n      }\r\n    });\r\n    this._stats = Object.freeze(this._stats);\r\n  }\r\n  /**\r\n   * Did the database get updated?\r\n   * @return {boolean}\r\n   */\r\n\r\n\r\n  (0, _createClass2[\"default\"])(QueryStatistics, [{\r\n    key: \"containsUpdates\",\r\n    value: function containsUpdates() {\r\n      var _this2 = this;\r\n\r\n      return Object.keys(this._stats).reduce(function (last, current) {\r\n        return last + _this2._stats[current];\r\n      }, 0) > 0;\r\n    }\r\n    /**\r\n     * Returns the query statistics updates in a dictionary.\r\n     * @returns {*}\r\n     */\r\n\r\n  }, {\r\n    key: \"updates\",\r\n    value: function updates() {\r\n      return this._stats;\r\n    }\r\n    /**\r\n     * Return true if the system database get updated, otherwise false\r\n     * @returns {boolean} - If the system database get updated or not.\r\n     */\r\n\r\n  }, {\r\n    key: \"containsSystemUpdates\",\r\n    value: function containsSystemUpdates() {\r\n      return this._systemUpdates > 0;\r\n    }\r\n    /**\r\n     * @returns {number} - Number of system updates\r\n     */\r\n\r\n  }, {\r\n    key: \"systemUpdates\",\r\n    value: function systemUpdates() {\r\n      return this._systemUpdates;\r\n    }\r\n  }]);\r\n  return QueryStatistics;\r\n}();\r\n/**\r\n * Class for Cypher notifications\r\n * @access public\r\n */\r\n\r\n\r\nvar Notification =\r\n/*#__PURE__*/\r\nfunction () {\r\n  /**\r\n   * Create a Notification instance\r\n   * @constructor\r\n   * @param {Object} notification - Object with notification data\r\n   */\r\n  function Notification(notification) {\r\n    (0, _classCallCheck2[\"default\"])(this, Notification);\r\n    this.code = notification.code;\r\n    this.title = notification.title;\r\n    this.description = notification.description;\r\n    this.severity = notification.severity;\r\n    this.position = Notification._constructPosition(notification.position);\r\n  }\r\n\r\n  (0, _createClass2[\"default\"])(Notification, null, [{\r\n    key: \"_constructPosition\",\r\n    value: function _constructPosition(pos) {\r\n      if (!pos) {\r\n        return {};\r\n      }\r\n\r\n      return {\r\n        offset: intValue(pos.offset),\r\n        line: intValue(pos.line),\r\n        column: intValue(pos.column)\r\n      };\r\n    }\r\n  }]);\r\n  return Notification;\r\n}();\r\n/**\r\n * Class for exposing server info from a result.\r\n * @access public\r\n */\r\n\r\n\r\nvar ServerInfo =\r\n/**\r\n * Create a ServerInfo instance\r\n * @constructor\r\n * @param {Object} serverMeta - Object with serverMeta data\r\n */\r\nfunction ServerInfo(serverMeta) {\r\n  (0, _classCallCheck2[\"default\"])(this, ServerInfo);\r\n\r\n  if (serverMeta) {\r\n    this.address = serverMeta.address;\r\n    this.version = serverMeta.version;\r\n  }\r\n};\r\n\r\nfunction intValue(value) {\r\n  return (0, _integer.isInt)(value) ? value.toInt() : value;\r\n}\r\n\r\nfunction valueOrDefault(key, values) {\r\n  var defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\r\n\r\n  if (key in values) {\r\n    var value = values[key];\r\n    return (0, _integer.isInt)(value) ? value.toInt() : value;\r\n  } else {\r\n    return defaultValue;\r\n  }\r\n}\r\n/**\r\n * The constants for query types\r\n * @type {{SCHEMA_WRITE: string, WRITE_ONLY: string, READ_ONLY: string, READ_WRITE: string}}\r\n */\r\n\r\n\r\nvar queryType = {\r\n  READ_ONLY: 'r',\r\n  READ_WRITE: 'rw',\r\n  WRITE_ONLY: 'w',\r\n  SCHEMA_WRITE: 's'\r\n};\r\nexports.queryType = queryType;\r\nvar _default = ResultSummary;\r\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}